@{
    ViewBag.Title = "CompanyIndex";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=8,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

    <link href="~/FlatLab/css/style.min.css?v=267" rel="stylesheet" />
    <link href="~/FlatLab/hivideo/assets/hivideo.css" rel="stylesheet" />
    <script src="~/FlatLab/js/jquery-1.8.3.min.js?v=267" type="text/javascript"></script>
    <script src="~/FlatLab/js/jquery.tmpl.min.js?v=267" type="text/javascript"></script>
    <script src="~/FlatLab/js/jquery.nicescroll.js?v=267" type="text/javascript"></script>

    <script src="~/FlatLab/nanogallery/jquery.transit.min.js?v=267" type="text/javascript"></script>
    <link href="~/FlatLab/nanogallery/css/nanogallery.css?v=267" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="~/FlatLab/nanogallery/jquery.nanogallery.js?v=270"></script> 

 @* <script src="~/FlatLab/hivideo/hivideo.js" type="text/javascript" ></script>@*
    <script src="~/FlatLab/html5media.min.js"></script>
    <link href="~/FlatLab/videojsPlay/video-js.css" rel="stylesheet" type="text/css">
    <script src="~/FlatLab/videojsPlay/video.js"></script>*@

    <style type="text/css">
        html{background-color:#FFF; margin:0; padding:0; overflow-x:hidden;}
	    body{background-color:#FFF; margin:0; padding:0; font-size:15px;line-height:1.5;font-family:Tahoma,Simsun,sans-serif;color:#333;
            -moz-user-select: none; /*火狐*/  -webkit-user-select: none; /*webkit浏览器*/ -ms-user-select: none; /*IE10*/ user-select: none;}
	    #ulDigitalContent li{float:left;}
	    #divCompanyContent { font-size:18px;line-height:1.5;font-family:Tahoma,Simsun,sans-serif; }
	    #divCompanyContent p { font-size:18px;line-height:1.5;font-family:Tahoma,Simsun,sans-serif; }
	    .nanogallery_theme_default .nanoGalleryContainerParent{ text-align:left; }
	    .nanogallery_theme_default .nanoGalleryContainer .container{ border:0px; }
	    .nanogallery_theme_default .nanoGalleryContainer .container .imgContainer{background:#FFF;}
	    .nanogallery_theme_default .nanoGalleryViewer .content{background:#111;}
	    .disabled{ pointer-events:none;}
	
	    /*-----------hotel_tabs-----------*/
	    .hotel_tabs_box a{text-decoration:none;}
	    .hotel_tabs_box{width:100%;height:49px;margin-bottom:10px;border-bottom:1px solid #74A2DE;background:#fff;}
	    .hotel_tabs{position:absolute;z-index:1; overflow: visible; width:100%;}
	    .hotel_tabs li{ position: relative; float:left;display:inline;width:10%;height:36px;margin-right:3px;text-align:center;font:normal 14px/33px Simsun;}
	    .hotel_tabs a{display:block;height:36px;background:#FEFEFE;border-top:1px solid #B5CCE9;border-right:1px solid #B5CCE9;border-left:1px solid #B5CCE9;border-radius:2px 2px 0 0;color:#444;}
	    .hotel_tabs a:hover{background:#DCEEFD;text-decoration:none;}
	    .hotel_tabs li.current{height:38px;}
	    .hotel_tabs li.current a{height:35px;border-top-width:3px;border-color:#74A2DE;background:#fff;font-weight:bold;color:#0066CC;}

        @@media only screen and (max-width: 1200px) { div{ font-size: 39px; }}        @@media only screen and (max-width: 1100px) { div{ font-size: 37px; }}        @@media only screen and (max-width: 1000px) { div{ font-size: 35px; }}        @@media only screen and (max-width: 900px) { div{ font-size: 33px; }}        @@media only screen and (max-width: 800px) { div{ font-size: 31px; }}        @@media only screen and (max-width: 700px) { div{ font-size: 29px; }}        @@media only screen and (max-width: 600px) { div{ font-size: 27px; }}        @@media only screen and (max-width: 500px) { div{ font-size: 25px; }}        @@media only screen and (max-width: 400px) { div{ font-size: 23px; }}        @@media only screen and (max-width: 300px) { div{ font-size: 21px; }}	

    </style>
</head>
<body style="width:95%;height:100%;">
    <form style="width:100%;">
	    <div class="hotel_tabs_box">
		    <ul class="hotel_tabs" id="hotel_tabs_DP_TAB">
			    <li tabIndex="1" class="fn-hotel-list current"><a href="javascript:void(0);">公司介绍</a></li>
			    <li tabIndex="2" class="fn-hotel-list"><a href="javascript:void(0);">公司愿景</a></li>
                <li tabIndex="3" class="fn-hotel-list"><a href="javascript:void(0);">公司图片</a></li>
                <li tabIndex="4" class="fn-hotel-list"><a href="javascript:void(0);">公司视频</a></li>
		    </ul>
	    </div>
	    <br /><br />
        <div id="divCompanyContent">
            <div id="divCompanyInfo"></div>
            <div id="divCompanyFeture"></div>
            <div id="divCompanyPicture"></div>
            <div id="divCompanyVideo"></div>
        </div>
    </form>
</body>
</html>
<script id="PictureTmpl" type="text/x-jquery-tmpl">
    {{each(i,item) DigitalContentList}}
            <a href="${item.Path}" data-ngthumb="${item.Path}" data-ngdesc="">${item.Name}</a>
    {{/each}}
</script>
<script id="VideoTmpl" type="text/x-jquery-tmpl">
     <ul id="ulDigitalContent">
    {{each(i,item) DigitalContentList}}
        <li class="videoContainer" style="width:33%;height:300px;cursor:pointer;" path="${item.Path}" smallImage="${item.SmallImage}">
            <div style="width:100%;height:100%;text-align:center;">
                <img src="${item.SmallImage}" width="240px" height="200px" />
            <div>
            <div style="text-align:center;"><p>${item.Name}</p><div>
        </li>
    {{/each}}
    </ul>
</script>

<script type="text/javascript">
    var clickCount = 0;
    $(function () {
        $(".hotel_tabs_box li").each(function () {
            $(this).click(function () {
                $(".hotel_tabs_box li").removeClass("current");
                $(this).addClass("current");
                var tabIndex = $(this).attr('tabIndex');
                $(".hotel_tabs_box").addClass("disabled");

                //setTimeout(SetTab(tabIndex), 1200);
                SetTab($(this).attr('tabIndex'));
            });
        });

        SetTab("1");

        document.oncontextmenu = function () {return false;} 

        //页面鼠标事件，防止webkitbroswer崩溃
        $("body").on("mousedown", function () { return false; });
        $("body").on("mousemove", function () { event.returnValue = false; });
        $("input").bind("mousedown", function () { event.stopPropagation(); });
        $("select").bind("mousedown", function () { event.stopPropagation(); });
        $("textarea").bind("mousedown", function () { event.stopPropagation(); });
        

       // $("div").on("mousedown", function () { return false; });
       // $("img").on("mousedown", function () { return false; });
       // $("img").on("dragstart", function () { return false; });
       // $("body").on("mousemove", function () { event.returnValue = false; return false; });
       // $("body").mousemove(function(){event.returnValue=false;});
    });

    function SetTab(tabIndex) {
        switch (tabIndex) {
            case "1": GetCompanyContent(1); break;
            case "2": GetCompanyContent(2); break;
            case "3": GetCompanyDigitalContent(1); break;
            case "4": GetCompanyDigitalContent(2); break;
        }
        $(".hotel_tabs_box").removeClass("disabled");
    }

    function GetCompanyContent(type) {
        $("#divCompanyPicture").hide();
        $("#divCompanyVideo").hide();

        if (type == 1) {
            $("#divCompanyInfo").show();
            $("#divCompanyFeture").hide();
//            if ($("#divCompanyInfo").html() != "") {
//                return;
//            }
            $("#divCompanyInfo").html('');

        } else {
            $("#divCompanyFeture").show();
            $("#divCompanyInfo").hide();
//            if ($("#divCompanyFeture").html() != "") {
//                return;
//            }
            $("#divCompanyFeture").html('');
        }

        $.ajax({
            url: "../DigitalContent/GetCompanyContent",
            data: { type: type },
            type: 'POST',
            dataType: 'json',
            async: false,
            success: function (data) {
                if (type == 1) {
                    $("#divCompanyInfo").html(data);
                } else {
                    $("#divCompanyFeture").html(data);
                }
            },
            error: function (xhr, textStatus) {
                alert('对不起，系统发生错误，请重试');
            }
        });
    }

    function GetCompanyDigitalContent(type) {
        $("#divCompanyInfo").hide();
        $("#divCompanyFeture").hide();

        if (type == 1) {
            $("#divCompanyPicture").show();
            $("#divCompanyVideo").hide();
//            if ($("#divCompanyPicture").html() != "") {
//                jQuery("#divCompanyPicture").nanoGallery({ thumbnailWidth: 260, thumbnailHeight: 200,
//                    displayCaption: true,
//                    displayBreadcrumb: true,
//                    thumbnailHoverEffect: [{ 'name': 'descriptionSlideUp', 'duration': 300 }, { 'name': 'borderLighter'}],
//                    colorScheme: 'light'
//                });

//                return;
//            }
            $("#divCompanyPicture").html('');

        } else {
            $("#divCompanyVideo").show();
            $("#divCompanyPicture").hide();

//            if ($("#divCompanyVideo").html() != "") {
//                return;
//            }
            $("#divCompanyVideo").html('');
        }

        $.ajax({
            url: "../DigitalContent/GetCompanyDigitalContent",
            data: { type: type },
            type: 'POST',
            dataType: 'json',
            async: false,
            success: function (data) {
                if (type == 1) {
                    $("#PictureTmpl").tmpl({ DigitalContentList: data }).appendTo($('#divCompanyPicture').html(''));

                    jQuery("#divCompanyPicture").nanoGallery({ thumbnailWidth: 260, thumbnailHeight: 200,
                        displayCaption: true,
                        displayBreadcrumb: true,
                        thumbnailHoverEffect: [{ 'name': 'descriptionSlideUp', 'duration': 300 }, { 'name': 'borderLighter'}],
                        colorScheme: 'light'
                    });

                } else {
                    $("#VideoTmpl").tmpl({ DigitalContentList: data }).appendTo($('#divCompanyVideo').html(''));
                    $(".videoContainer").each(function () {
                        $(this).click(function () {
                            window.external.WebBrowserPlayVideo($(this).attr('path'), $(this).attr('smallImage'));
                        });
                    });
                }
            },
            error: function (xhr, textStatus) {
                alert('对不起，系统发生错误，请重试');
            }
        });
    }

</script>



